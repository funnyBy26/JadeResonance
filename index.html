<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>玉韵千年 - 首页</title>
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/home.css">
</head>
<body>
    <div id="loading-mask">
        <img id="loading-img" src="assets/images/loading.png" alt="加载中">
    </div>
    <canvas id="jade-canvas"></canvas>
    <div class="background">
        <!-- 动态水墨山水背景 -->
    </div>
    
    <div class="topbar hidden-before-load">
        <div class="topbar-logo">玉韵千年</div>
        <nav class="topbar-nav">
            <a href="index.html">首页</a>
            <a href="pages/jade-select/index.html">玉石拟人</a>
            <a href="pages/design-workshop/workshop.html">设计工坊</a>
            <a href="pages/museum/dynasty.html">文物展示</a>
            <a href="about.html">关于我们</a>
        </nav>
    </div>

    <div class="main-content hidden-before-load">
        <div class="welcome-text">
            <h1>探索千年玉韵</h1>
            <p>在这里，每一块玉石都诉说着一个古老的故事，每一件玉器都承载着中华文明的智慧。让我们一起走进玉的世界，感受那份独特的东方韵味。</p>
        </div>

        <div class="module-buttons">
            <a href="pages/jade-select/index.html" class="module-btn">
                <img src="assets/images/玉石拟人.png" alt="玉石拟人">
                <div class="module-btn-title">玉石拟人</div>
            </a>
            <a href="pages/design-workshop/workshop.html" class="module-btn">
                <img src="assets/images/玉器工坊.png" alt="设计工坊">
                <div class="module-btn-title">设计工坊</div>
            </a>
            <a href="pages/museum/dynasty.html" class="module-btn">
                <img src="assets/images/玉石展示.png" alt="文物展示">
                <div class="module-btn-title">文物展示</div>
            </a>
        </div>

        <div class="story-guide">
            <p>你意外唤醒沉睡的玉灵，成为玉境守护者，通过对话收集散落的'玉魄'…</p>
        </div>
    </div>
    
    <script src="../../js/common.js"></script>
    <script src="../../js/main.js"></script>
    <script src="js/jade-canvas.js"></script>
    <script>
    window.addEventListener('DOMContentLoaded', function() {
        // 检查 sessionStorage 是否有 visitedIndex 标记
        if (!sessionStorage.getItem('visitedIndex')) {
            // 第一次访问首页，显示 loading 动画
            setTimeout(function() {
                document.getElementById('loading-mask').style.opacity = '0';
                setTimeout(function() {
                    document.getElementById('loading-mask').style.display = 'none';
                    // 显示主页内容
                    document.querySelectorAll('.hidden-before-load').forEach(el => {
                        el.classList.remove('hidden-before-load');
                    });
                    document.querySelector('.main-content').classList.add('animate-in');
                    setTimeout(function() {
                        document.querySelectorAll('.topbar, .welcome-text, .module-buttons, .story-guide').forEach(el => {
                            el.classList.add('animate-in');
                        });
                    }, 200);
                }, 400);
            }, 1000);
            // 设置已访问标记
            sessionStorage.setItem('visitedIndex', 'true');
        } else {
            // 已访问过首页，直接显示内容，不显示 loading 动画
            document.getElementById('loading-mask').style.display = 'none';
            document.querySelectorAll('.hidden-before-load').forEach(el => {
                el.classList.remove('hidden-before-load');
            });
            document.querySelector('.main-content').classList.add('animate-in');
            setTimeout(function() {
                document.querySelectorAll('.topbar, .welcome-text, .module-buttons, .story-guide').forEach(el => {
                    el.classList.add('animate-in');
                });
            }, 200);
        }
    });
    </script>
</body>
</html>